(function(a){a.fn.wordlimit=function(b){var d={allowed:10,wordcounttext:"Word count"};var b=a.extend(d,b);function c(h,f){if(a(h).val()){var e=a(h).val().split(" ").length}else{var e=0}var g=b.allowed-e;if(g<0&&f){if(f.which!=46&&f.which!=8&&f.which!=9&&f.which!=37&&f.which!=38&&f.which!=39&&f.which!=40&&f.which!=35&&f.which!=36){f.preventDefault();words=a(h).val().split(" ");words=words.slice(0,b.allowed);a(h).val(words.join(" ")+" ")}}a(h).parent().parent().find(".label span.counter").html("("+b.wordcounttext+" "+Math.min(e,b.allowed)+" / "+b.allowed+")")}this.each(function(f){a(this).parent().parent().find(".label").append('&nbsp;&nbsp;<span class="counter"></span>');c(this,f);a(this).keydown(function(g){c(this,g)});a(this).click(function(g){c(this,g)});a(this).blur(function(g){c(this,g)});a(this).change(function(g){c(this,g)})})}})(jQuery);